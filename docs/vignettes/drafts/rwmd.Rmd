---
title: "RWMD"
author: "Dmitriy Selivanov"
date: "`r Sys.Date()`"
output:
  html_document:
    fig_caption: false
    toc: true
    toc_float:
      collapsed: false
      smooth_scroll: false
    toc_depth: 3
vignette: >
  %\VignetteIndexEntry{Document distances"}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---
```{r global_options, include=FALSE}
knitr::opts_chunk$set(echo=TRUE, warning=FALSE, message=FALSE, eval=FALSE)
```

I this vignette we will use Amazon Fine Foods reviews dataset and try to explore several approaches. Dataset can be downloaded from [snap.stanford.edu](https://snap.stanford.edu/data/web-FineFoods.html) or [kaggle](https://www.kaggle.com/snap/amazon-fine-food-reviews). We assume that reader downloaded it from kaggle (kaggle provides it in tabular form) and unpacked it from zip archive.

```{r, message=F}
library(text2vec)
library(data.table)
library(stringr)
# adjust to your part
path = "~/datasets/amazon-fine-foods/Reviews.csv"
dt = fread(path, showProgress = FALSE)
```


We are mostly interested in `dt$Text` field wich contains text of the review. Lets clean up it a little bit:
```{r}
prep_fun = function(x) {
  x %>% 
    # make text lower case
    str_to_lower %>% 
    # remove non-alphanumeric symbols
    str_replace_all("[^[:alnum:]]", " ") %>% 
    # collapse multiple spaces
    str_replace_all("\\s+", " ")
}
# add new column with "clean" review
dt[, text_clean := prep_fun(Text)]
# Check what we have:
dt$text_clean[[1]]
```

